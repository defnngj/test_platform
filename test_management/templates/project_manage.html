{% extends "base.html" %}
{% block content %}

    <!--侧边导航 -->
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
          <ul class="nav nav-sidebar">
            <li class="active" id="project">
              <a href="#">
                <span class="glyphicon glyphicon-th-large"></span> 项目管理
                <span class="sr-only">(current)</span>
              </a>
            </li>
            <li id="module">
              <a href="/manage/module/">
                <span class="glyphicon glyphicon-th"></span> 模块管理</a>
            </li>
          </ul>
          <ul class="nav nav-sidebar">
            <li>
              <a href="">
                <span class="glyphicon glyphicon-th-list"></span> 用例管理</a>
            </li>
            <li>
              <a href="">
                <span class="glyphicon glyphicon-tasks"></span> 任务管理</a>
            </li>
          </ul>
          <ul class="nav nav-sidebar">
            <li>
              <a href="">
                <span class="glyphicon glyphicon-log-in"></span> MockServer</a>
            </li>
          </ul>
        </div>
      </div>

      {% if type == "list" %}
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
          <h3 class="page-header">项目列表
          <button type="button" class="btn btn-default" style="float: right;"
                  onclick="window.location.href='/manage/add_project/'">创建</button>
          </h3>
            <div class="row">
              <div class="col-md-6" style="width: 90%;">
                <table class="table table-bordered" >
                  <thead>
                    <tr>
                      <th>id</th>
                      <th>名称</th>
                      <th>描述</th>
                      <th>状态</th>
                      <th>时间</th>
                      <th>操作</th>
                    </tr>
                  </thead>
                  <tbody>
                     {% for project in projects %}
                      <tr>
                        <td>{{ project.id }}</td>
                        <td>{{ project.name }}</td>
                        <td>{{ project.describe }}</td>
                        <td>{{ project.status }}</td>
                        <td>{{ project.create_time | date:"Y-m-d H:i:s" }}</td>
                        <td>
                          <a href="/manage/edit_project/{{ project.id }}/">编辑</a>
                          <a href="/manage/delete_project/{{ project.id }}/">删除</a>
                        </td>
                      </tr>
                     {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
        </div>
      {% endif %}


      {% if type == "add" %}
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
          <h3 class="page-header">创建项目</h3>
          <div class="row">
            <div class="col-md-6">
              <form class="form-horizontal" role="form" method="post" style="margin-left: 50px;">
                
                <div class="form-group">
                  <label class="col-sm-2 control-label">名称:</label>
                  <div class="col-sm-10">
                    {{ form.name }}
                  </div>
                </div>
                
                <div class="form-group">
                  <!-- Textarea -->
                  <label class="col-sm-2 control-label">描述:</label>
                  <div class="col-sm-10">
                    {{ form.describe }}
                  </div>
                </div>
                
                <div class="form-group">
                  <div class="col-sm-offset-2 col-sm-10">
                    <button class="btn btn-default" onclick="window.location.href='/manage/project/'">取消</button>
                    <button type="submit" class="btn btn-primary">提交</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      {% endif %}

      {% if type == "edit" %}
        {#  直接渲染整个表单{{ form.as_p }} #}
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
          <h3 class="page-header">编辑项目</h3>
          <div class="row">
            <div class="col-md-6">
              <form class="form-horizontal" role="form" method="post" style="margin-left: 50px;">

                <div class="form-group">
                  <label class="col-sm-2 control-label">名称:</label>
                  <div class="col-sm-10">
                    {{ form.name }}
                  </div>
                </div>

                <div class="form-group">
                  <!-- Textarea -->
                  <label class="col-sm-2 control-label">描述:</label>
                  <div class="col-sm-10">
                    {{ form.describe }}
                  </div>
                </div>

                <div class="form-group">
                  <label class="col-sm-2 control-label">状态:</label>
                  <div class="col-sm-10">
                    {{ form.status }}
                  </div>
                </div>

                <div class="form-group">
                  <div class="col-sm-offset-2 col-sm-10">
                    <button class="btn btn-default" onclick="window.location.href='/manage/project/'">取消</button>
                    <button type="submit" class="btn btn-primary">更新</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      {% endif %}


    </div>


{% endblock %}